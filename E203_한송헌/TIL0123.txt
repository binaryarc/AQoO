PoC - 웹 푸시 알람

웹 푸시 알람(Web Push Notification)은 웹 애플리케이션이 사용자의 브라우저를 통해 실시간으로 알림을 전송할 수 있는 기능입니다. 사용자가 웹사이트를 방문 중이 아니더라도 알림이 전송되며, 데스크톱이나 모바일 장치에서 알림이 표시됩니다. 이는 사용자와의 상호작용을 유지하고 중요한 정보를 전달하는 데 유용합니다.

주요 구성 요소
1. 서비스 워커(Service Worker)
웹 푸시 알람의 핵심 구성 요소로, 브라우저와 백그라운드에서 작동하는 스크립트입니다.
푸시 메시지를 수신하고 알림을 표시하는 역할을 수행합니다.
2. 푸시 서비스(Push Service)
브라우저에서 제공하는 서버로, 푸시 메시지를 전송하고 브라우저로 전달하는 역할을 합니다.
주요 브라우저는 자체 푸시 서비스를 제공하며, 예: Google의 Firebase Cloud Messaging(FCM), Mozilla의 AutoPush 등.
3. 애플리케이션 서버
푸시 알람을 트리거하는 서버입니다. 서비스 워커에 메시지를 전달하기 위해 푸시 서비스와 통신합니다.
보안 인증을 위해 VAPID 키를 생성 및 사용합니다.
4. 사용자 브라우저
사용자가 웹 푸시 알람을 수신할 브라우저로, 브라우저가 푸시 메시지를 처리하고 표시합니다.

작동 원리
1. 사용자 등록
사용자가 웹사이트에서 푸시 알람 수신을 허용하면, 브라우저는 푸시 서비스에 등록되고 고유한 엔드포인트(Endpoint)를 생성합니다.
애플리케이션 서버는 이 엔드포인트를 저장하고, 해당 사용자를 식별합니다.
2. 푸시 메시지 생성 및 전송
애플리케이션 서버는 사용자의 엔드포인트를 사용하여 푸시 서비스를 통해 메시지를 전송합니다.
메시지는 보안을 위해 암호화되어 전송됩니다.
3. 알람 수신 및 표시
브라우저의 서비스 워커가 푸시 메시지를 수신하고, 이를 사용자의 장치에 알림으로 표시합니다.

Firebase Cloud Messaging(FCM)
클라우드 메시징은 앱(웹, 모바일)과 Firebase 서버 간에 알림 및 데이터 메시지를 교환하는 방법입니다. 이를 사용하면 애플리케이션 서버가 특정 사용자, 사용자 그룹, 또는 주제(topic)에 메시지를 전송할 수 있습니다.

알림 메시지(Notification Message)
주로 UI에서 알림으로 표시됩니다.
FCM 서버가 메시지 내용을 생성하고 알림을 자동 처리합니다.
사용자 개입 없이 브라우저가 직접 표시할 수 있습니다.

FCM 클라우드 메시징 동작 흐름
1. 사용자 등록 (클라이언트)
사용자 디바이스에서 FCM 토큰을 요청합니다.
토큰은 사용자를 식별하는 고유한 값으로, 애플리케이션 서버가 이를 저장합니다.
2. 서버에서 FCM API 호출
서버는 FCM API를 사용하여 메시지를 FCM 서버에 전송합니다.
FCM 서버는 메시지를 해당 사용자(토큰)로 전달합니다.
3. 메시지 수신 및 처리
사용자가 메시지를 수신하고, 알림 표시 또는 데이터 처리와 같은 동작을 수행합니다.